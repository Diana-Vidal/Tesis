EDAD >= 55  & EDAD <= 59 ~ '55 - 59',
EDAD >= 60  & EDAD <= 64 ~ '60 - 64',
EDAD >= 65 ~ '65 o más'))) %>%
add_column(., AÑO = 2020) %>%
filter(!is.na(FECHA_DEF),
CLASIFICACION_FINAL %in% c(1,2,3)) %>%
left_join(., catalogo_municipios, by = c("ENTIDAD_RES" = "ENTIDAD", "MUNICIPIO_RES" = "CLAVE_MUNICIPIO"))
#Cargamos librerias
library(data.table)
library(tidyverse)
#Creamos vector con variables a utilizar de Datos Abiertos
variables <- c("ID_REGISTRO", "SEXO", "ENTIDAD_RES", "MUNICIPIO_RES","FECHA_DEF", "EDAD",
"DIABETES", "EPOC", "ASMA", "HIPERTENSION", "CARDIOVASCULAR", "OBESIDAD", "RENAL_CRONICA",
"CLASIFICACION_FINAL")
catalogo_municipios <- fread("Bases/Catalogo_Municipios.csv")
#Cargamos la base de COVID-19 Datos Abiertos 2020
COVID2020 <- fread("Bases/Datos abiertos/COVID19MEXICO2020.csv",
select = variables) %>%
mutate(FECHA_DEF = as.Date(FECHA_DEF,format = "%Y-%m-%d"),
SEXO = recode(SEXO,
"1" = "MUJER",
"2" = "HOMBRE",
"3" = "NO ESPECIFICADO"),
ENTIDAD_RES = recode(ENTIDAD_RES,
"1" = "AGUASCALIENTES",
"2" = "BAJA CALIFORNIA",
"3" = "BAJA CALIFORNIA SUR",
"4" = "CAMPECHE",
"5" = "COAHUILA",
"6" = "COLIMA",
"7" = "CHIAPAS",
"8" = "CHIHUAHUA",
"9" = "CIUDAD DE MEXICO",
"10" = "DURANGO",
"11" = "GUANAJUATO",
"12" = "GUERRERO",
"13" = "HIDALGO",
"14" = "JALISCO",
"15" = "MEXICO",
"16" = "MICHOACAN",
"17" = "MORELOS",
"18" = "NAYARIT",
"19" = "NUEVO LEON",
"20" = "OAXACA",
"21" = "PUEBLA",
"22" = "QUERETARO",
"23" = "QUINTANA ROO",
"24" = "SAN LUIS POTOSI",
"25" = "SINALOA",
"26" = "SONORA",
"27" = "TABASCO",
"28" = "TAMAULIPAS",
"29" = "TLAXCALA",
"30" = "VERACRUZ",
"31" = "YUCATAN",
"32" = "ZACATECAS",
"36" = "ESTADOS UNIDOS MEXICANOS",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
DIABETES = recode(DIABETES,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
EPOC = recode(EPOC,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
ASMA = recode(ASMA,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
HIPERTENSION = recode(HIPERTENSION,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
CARDIOVASCULAR = recode(CARDIOVASCULAR,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
OBESIDAD = recode(OBESIDAD,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
RENAL_CRONICA = recode(RENAL_CRONICA,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
GRUPO_EDAD = factor(case_when(EDAD >= 0 & EDAD <= 4 ~ '0 - 4',
EDAD >= 5  & EDAD <= 9 ~ '5 - 9',
EDAD >= 10  & EDAD <= 14 ~ '10 - 14',
EDAD >= 15  & EDAD <= 19 ~ '15 - 19',
EDAD >= 20  & EDAD <= 24 ~ '20 - 24',
EDAD >= 25  & EDAD <= 29 ~ '25 - 29',
EDAD >= 30  & EDAD <= 34 ~ '30 - 34',
EDAD >= 35  & EDAD <= 39 ~ '35 - 39',
EDAD >= 40  & EDAD <= 44 ~ '40 - 44',
EDAD >= 45  & EDAD <= 49 ~ '45 - 49',
EDAD >= 50  & EDAD <= 54 ~ '50 - 54',
EDAD >= 55  & EDAD <= 59 ~ '55 - 59',
EDAD >= 60  & EDAD <= 64 ~ '60 - 64',
EDAD >= 65 ~ '65 o más'))) %>%
add_column(., AÑO = 2020) %>%
filter(!is.na(FECHA_DEF),
CLASIFICACION_FINAL %in% c(1,2,3)) %>%
left_join(., catalogo_municipios, by = c("ENTIDAD_RES" = "ENTIDAD", "MUNICIPIO_RES" = "CLAVE_MUNICIPIO"))
View(COVID2020)
str(COVID2020)
head(COVID2020)
summary(COVID2020)
#Cargamos librerias
library(data.table)
library(tidyverse)
#Creamos vector con variables a utilizar de Datos Abiertos
variables <- c("ID_REGISTRO", "SEXO", "ENTIDAD_RES", "MUNICIPIO_RES","FECHA_DEF", "EDAD",
"DIABETES", "EPOC", "ASMA", "HIPERTENSION", "CARDIOVASCULAR", "OBESIDAD", "RENAL_CRONICA",
"CLASIFICACION_FINAL")
#Cargamos catalogo de municipios que vamos a utilzar para obtener nombres
catalogo_municipios <- fread("Bases/Catalogo_Municipios.csv")
#Cargamos la base de COVID-19 Datos Abiertos 2020
#Modificamos el formato de fecha
#Renombramos las variables
#Creamos variable de grupo de edad
#Filtramos Clasificacion final por confirmados a COVID-19
#Unimos base con el catalogo de municipios
COVID2020 <- fread("Bases/Datos abiertos/COVID19MEXICO2020.csv",
select = variables) %>%
mutate(FECHA_DEF = as.Date(FECHA_DEF,format = "%Y-%m-%d"),
SEXO = recode(SEXO,
"1" = "MUJER",
"2" = "HOMBRE",
"3" = "NO ESPECIFICADO"),
ENTIDAD_RES = recode(ENTIDAD_RES,
"1" = "AGUASCALIENTES",
"2" = "BAJA CALIFORNIA",
"3" = "BAJA CALIFORNIA SUR",
"4" = "CAMPECHE",
"5" = "COAHUILA",
"6" = "COLIMA",
"7" = "CHIAPAS",
"8" = "CHIHUAHUA",
"9" = "CIUDAD DE MEXICO",
"10" = "DURANGO",
"11" = "GUANAJUATO",
"12" = "GUERRERO",
"13" = "HIDALGO",
"14" = "JALISCO",
"15" = "MEXICO",
"16" = "MICHOACAN",
"17" = "MORELOS",
"18" = "NAYARIT",
"19" = "NUEVO LEON",
"20" = "OAXACA",
"21" = "PUEBLA",
"22" = "QUERETARO",
"23" = "QUINTANA ROO",
"24" = "SAN LUIS POTOSI",
"25" = "SINALOA",
"26" = "SONORA",
"27" = "TABASCO",
"28" = "TAMAULIPAS",
"29" = "TLAXCALA",
"30" = "VERACRUZ",
"31" = "YUCATAN",
"32" = "ZACATECAS",
"36" = "ESTADOS UNIDOS MEXICANOS",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
DIABETES = recode(DIABETES,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
EPOC = recode(EPOC,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
ASMA = recode(ASMA,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
HIPERTENSION = recode(HIPERTENSION,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
CARDIOVASCULAR = recode(CARDIOVASCULAR,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
OBESIDAD = recode(OBESIDAD,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
RENAL_CRONICA = recode(RENAL_CRONICA,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
GRUPO_EDAD = factor(case_when(EDAD >= 0 & EDAD <= 4 ~ '0 - 4',
EDAD >= 5  & EDAD <= 9 ~ '5 - 9',
EDAD >= 10  & EDAD <= 14 ~ '10 - 14',
EDAD >= 15  & EDAD <= 19 ~ '15 - 19',
EDAD >= 20  & EDAD <= 24 ~ '20 - 24',
EDAD >= 25  & EDAD <= 29 ~ '25 - 29',
EDAD >= 30  & EDAD <= 34 ~ '30 - 34',
EDAD >= 35  & EDAD <= 39 ~ '35 - 39',
EDAD >= 40  & EDAD <= 44 ~ '40 - 44',
EDAD >= 45  & EDAD <= 49 ~ '45 - 49',
EDAD >= 50  & EDAD <= 54 ~ '50 - 54',
EDAD >= 55  & EDAD <= 59 ~ '55 - 59',
EDAD >= 60  & EDAD <= 64 ~ '60 - 64',
EDAD >= 65 ~ '65 o más'))) %>%
add_column(., AÑO = 2020) %>%
filter(!is.na(FECHA_DEF),
CLASIFICACION_FINAL %in% c(1,2,3)) %>%
left_join(., catalogo_municipios, by = c("ENTIDAD_RES" = "ENTIDAD", "MUNICIPIO_RES" = "CLAVE_MUNICIPIO")) %>%
mutate(SEXO = as.factor(SEXO),
DIABETES = as.factor(DIABETES),
EPOC = as.factor(EPOC),
ASMA = as.factor(ASMA),
HIPERTENSION = as.factor(HIPERTENSION),
CARDIOVASCULAR = as.factor(CARDIOVASCULAR),
OBESIDAD = as.factor(OBESIDAD),
RENAL_CRONICA = as.factor(RENAL_CRONICA))
#Cargamos la base de COVID-19 Datos Abiertos 2020
#Modificamos el formato de fecha
#Renombramos las variables
#Creamos variable de grupo de edad
#Filtramos Clasificacion final por confirmados a COVID-19
#Unimos base con el catalogo de municipios
COVID2021 <- fread("Bases/Datos abiertos/COVID19MEXICO2021.csv",
select = variables) %>%
mutate(FECHA_DEF = as.Date(FECHA_DEF,format = "%Y-%m-%d"),
SEXO = recode(SEXO,
"1" = "MUJER",
"2" = "HOMBRE",
"3" = "NO ESPECIFICADO"),
ENTIDAD_RES = recode(ENTIDAD_RES,
"1" = "AGUASCALIENTES",
"2" = "BAJA CALIFORNIA",
"3" = "BAJA CALIFORNIA SUR",
"4" = "CAMPECHE",
"5" = "COAHUILA",
"6" = "COLIMA",
"7" = "CHIAPAS",
"8" = "CHIHUAHUA",
"9" = "CIUDAD DE MEXICO",
"10" = "DURANGO",
"11" = "GUANAJUATO",
"12" = "GUERRERO",
"13" = "HIDALGO",
"14" = "JALISCO",
"15" = "MEXICO",
"16" = "MICHOACAN",
"17" = "MORELOS",
"18" = "NAYARIT",
"19" = "NUEVO LEON",
"20" = "OAXACA",
"21" = "PUEBLA",
"22" = "QUERETARO",
"23" = "QUINTANA ROO",
"24" = "SAN LUIS POTOSI",
"25" = "SINALOA",
"26" = "SONORA",
"27" = "TABASCO",
"28" = "TAMAULIPAS",
"29" = "TLAXCALA",
"30" = "VERACRUZ",
"31" = "YUCATAN",
"32" = "ZACATECAS",
"36" = "ESTADOS UNIDOS MEXICANOS",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
DIABETES = recode(DIABETES,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
EPOC = recode(EPOC,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
ASMA = recode(ASMA,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
HIPERTENSION = recode(HIPERTENSION,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
CARDIOVASCULAR = recode(CARDIOVASCULAR,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
OBESIDAD = recode(OBESIDAD,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
RENAL_CRONICA = recode(RENAL_CRONICA,
"1" = "SI",
"2" = "NO",
"97" = "NO APLICA",
"98" = "SE IGNORA",
"99" = "NO ESPECIFICADO"),
GRUPO_EDAD = factor(case_when(EDAD >= 0 & EDAD <= 4 ~ '0 - 4',
EDAD >= 5  & EDAD <= 9 ~ '5 - 9',
EDAD >= 10  & EDAD <= 14 ~ '10 - 14',
EDAD >= 15  & EDAD <= 19 ~ '15 - 19',
EDAD >= 20  & EDAD <= 24 ~ '20 - 24',
EDAD >= 25  & EDAD <= 29 ~ '25 - 29',
EDAD >= 30  & EDAD <= 34 ~ '30 - 34',
EDAD >= 35  & EDAD <= 39 ~ '35 - 39',
EDAD >= 40  & EDAD <= 44 ~ '40 - 44',
EDAD >= 45  & EDAD <= 49 ~ '45 - 49',
EDAD >= 50  & EDAD <= 54 ~ '50 - 54',
EDAD >= 55  & EDAD <= 59 ~ '55 - 59',
EDAD >= 60  & EDAD <= 64 ~ '60 - 64',
EDAD >= 65 ~ '65 o más'))) %>%
add_column(., AÑO = 2021) %>%
filter(!is.na(FECHA_DEF),
CLASIFICACION_FINAL %in% c(1,2,3),
FECHA_DEF <= "2021-12-31") %>%
left_join(., catalogo_municipios, by = c("ENTIDAD_RES" = "ENTIDAD", "MUNICIPIO_RES" = "CLAVE_MUNICIPIO")) %>%
mutate(SEXO = as.factor(SEXO),
DIABETES = as.factor(DIABETES),
EPOC = as.factor(EPOC),
ASMA = as.factor(ASMA),
HIPERTENSION = as.factor(HIPERTENSION),
CARDIOVASCULAR = as.factor(CARDIOVASCULAR),
OBESIDAD = as.factor(OBESIDAD),
RENAL_CRONICA = as.factor(RENAL_CRONICA))
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO))
View(def_zmvm)
names(def_zmvm)
names(def_zmvm$MUNICIPIO_RES)
unique(def_zmvm$MUNICIPIO_RES)
zonas <- fread("Bases/Zonas_ZMVM.csv")
View(zonas)
View(def_zmvm)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO"))
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA)
unique(def_zmvm$ZONA)
#Unimos las bases de defunciones de COVID-19 del 2020 y 2021
#Seleccionamos las variables a utilizar
#Seleccionamos las defunciones de la CDMX y el EDOMEX
#Creamos columna con los nombres de los municipios sin acentos
#Unimos la base de zonas geograficas de acuerdo a Entidad y Municipio
#Eliminamos los Municipios que no pertenecen a la ZMVM (los que quedaron con NA)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA) %>%
group_by(FECHA_DEF, ENTIDAD_RES, MUNICIPIO_RES, ZONA) %>%
summarise(Defunciones = n())
#Unimos las bases de defunciones de COVID-19 del 2020 y 2021
#Seleccionamos las variables a utilizar
#Seleccionamos las defunciones de la CDMX y el EDOMEX
#Creamos columna con los nombres de los municipios sin acentos
#Unimos la base de zonas geograficas de acuerdo a Entidad y Municipio
#Eliminamos los Municipios que no pertenecen a la ZMVM (los que quedaron con NA)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA) %>%
group_by(FECHA_DEF) %>%
summarise(Defunciones = n())
#Unimos las bases de defunciones de COVID-19 del 2020 y 2021
#Seleccionamos las variables a utilizar
#Seleccionamos las defunciones de la CDMX y el EDOMEX
#Creamos columna con los nombres de los municipios sin acentos
#Unimos la base de zonas geograficas de acuerdo a Entidad y Municipio
#Eliminamos los Municipios que no pertenecen a la ZMVM (los que quedaron con NA)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA)
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv")
View(pob_zmvm)
#Unimos las bases de defunciones de COVID-19 del 2020 y 2021
#Seleccionamos las variables a utilizar
#Seleccionamos las defunciones de la CDMX y el EDOMEX
#Creamos columna con los nombres de los municipios sin acentos
#Unimos la base de zonas geograficas de acuerdo a Entidad y Municipio
#Eliminamos los Municipios que no pertenecen a la ZMVM (los que quedaron con NA)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA) %>%
left_join(., pob_zmvm, by = c("MUNICIPIO_RES" = "MUNICIPIO",
"AÑO" = "AÑO"))
View(pob_zmvm)
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
drop(ENTIDAD)
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
drop("ENTIDAD")
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
drop(.,"ENTIDAD")
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
drop(.,ENTIDAD)
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
[-2]
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
mutate(-2)
pob_zmvm <- fread("Bases/Municipios_ZMVM_Pob.csv") %>%
select(-2)
left_join(., pob_zmvm, by = c("MUNICIPIO_RES" = "MUNICIPIO",
"AÑO" = "AÑO"))
#Unimos las bases de defunciones de COVID-19 del 2020 y 2021
#Seleccionamos las variables a utilizar
#Seleccionamos las defunciones de la CDMX y el EDOMEX
#Creamos columna con los nombres de los municipios sin acentos
#Unimos la base de zonas geograficas de acuerdo a Entidad y Municipio
#Eliminamos los Municipios que no pertenecen a la ZMVM (los que quedaron con NA)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA) %>%
left_join(., pob_zmvm, by = c("MUNICIPIO_RES" = "MUNICIPIO",
"AÑO" = "AÑO"))
#Unimos las bases de defunciones de COVID-19 del 2020 y 2021
#Seleccionamos las variables a utilizar
#Seleccionamos las defunciones de la CDMX y el EDOMEX
#Creamos columna con los nombres de los municipios sin acentos
#Unimos la base de zonas geograficas de acuerdo a Entidad y Municipio
#Eliminamos los Municipios que no pertenecen a la ZMVM (los que quedaron con NA)
def_zmvm <- rbind(COVID2020, COVID2021) %>%
select(FECHA_DEF, AÑO, ENTIDAD_RES, MUNICIPIO, SEXO, EDAD, GRUPO_EDAD, DIABETES, EPOC, ASMA, HIPERTENSION,
CARDIOVASCULAR, OBESIDAD, RENAL_CRONICA) %>%
filter(ENTIDAD_RES %in% c("CIUDAD DE MEXICO", "MEXICO")) %>%
mutate(MUNICIPIO_RES = chartr("ÁÉÍÓÚ", "AEIOU", MUNICIPIO)) %>%
left_join(., zonas, by = c("ENTIDAD_RES" = "ENTIDAD",
"MUNICIPIO_RES" = "MUNICIPIO")) %>%
drop_na(ZONA) %>%
left_join(., pob_zmvm, by = c("MUNICIPIO_RES" = "MUNICIPIO",
"AÑO" = "AÑO")) %>%
select(-4)
